<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
      <title>Kill Bill</title>
      <style media="screen">
        .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
      </style>
      <style media="print">
        * {
          -webkit-transition:none!important;
          transition:none!important;
        }
        .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
      </style>
      <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
      <link href="stylesheets/print.css" rel="stylesheet" media="print" />
        <script src="javascripts/all.js"></script>
        <script>
          $(function() { setupCodeCopy(); });
        </script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
    </head>
    <body class="catalog" data-languages="[&quot;shell&quot;,&quot;java&quot;,&quot;ruby&quot;,&quot;python&quot;]">
      <header class="header sticky" id="header">
        <div class="header-wrapper">
          <div class="header-logo">
          <div class="logo-switch-wrapper">
              <div class="logo">
              <a href="/">
                <img src="images/logo/light-logo.svg" style="height:38px" alt="Kill Bill Docs" id="logo">
              </a>
            </div>
            <div class="switch">
              <input type="checkbox" id="theme-toggle">
              <span class="slider round"></span>
            </div>
          </div>
            <div class="header-search">
              <div class="search-form-wrapper">
                <div id="docsearch" style="height: 43px; display: flex; align-items: center; width: 100%;">
                </div>
              </div>
            </div>
          </div>
          <div class="nav-toggler sidebar-toggler">
            <svg class="hamburger" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 7C20.75 7.41421 20.4142 7.75 20 7.75L4 7.75C3.58579 7.75 3.25 7.41421 3.25 7C3.25 6.58579 3.58579 6.25 4 6.25L20 6.25C20.4142 6.25 20.75 6.58579 20.75 7Z" fill=""/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 12C20.75 12.4142 20.4142 12.75 20 12.75L4 12.75C3.58579 12.75 3.25 12.4142 3.25 12C3.25 11.5858 3.58579 11.25 4 11.25L20 11.25C20.4142 11.25 20.75 11.5858 20.75 12Z" fill=""/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 17C20.75 17.4142 20.4142 17.75 20 17.75L4 17.75C3.58579 17.75 3.25 17.4142 3.25 17C3.25 16.5858 3.58579 16.25 4 16.25L20 16.25C20.4142 16.25 20.75 16.5858 20.75 17Z" fill=""/>
            </svg>
          </div>
            <div class="lang-selector">
                  <a href="#" data-language-name="shell">shell</a>
                  <a href="#" data-language-name="java">java</a>
                  <a href="#" data-language-name="ruby">ruby</a>
                  <a href="#" data-language-name="python">python</a>
            </div>
        </div>
      </header>
      <div class="loader-wrapper">
        <div id="loading"></div>
      </div>
      <script>
        $(window).on('load',function(){
          $('.loader-wrapper').hide();
        });
      </script>
      <a href="#" id="nav-button">
        <span>
          NAV
          <img src="images/navbar.png" alt="" />
        </span>
      </a>
      <div class="toc-wrapper">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
          </div>
        <ul id="toc" class="toc-list-h1">
            <li>
                <a href="#catalog" class="toc-h1 toc-link" data-title="Catalog">Catalog</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#catalog-resource" class="toc-h2 toc-link" data-title="Catalog Resource">Catalog Resource</a>
                    </li>
                    <li>
                      <a href="#catalogvalidation-resource" class="toc-h2 toc-link" data-title="CatalogValidation Resource">CatalogValidation Resource</a>
                    </li>
                    <li>
                      <a href="#catalog-2" class="toc-h2 toc-link" data-title="Catalog">Catalog</a>
                    </li>
                    <li>
                      <a href="#subscription-info" class="toc-h2 toc-link" data-title="Subscription info">Subscription info</a>
                    </li>
                    <li>
                      <a href="#simple-plan" class="toc-h2 toc-link" data-title="Simple Plan">Simple Plan</a>
                    </li>
                </ul>
            </li>
        </ul>
          <ul class="toc-footer">
              <li><a href="mailto:support@killbill.io">Report a doc problem </a></li>
          </ul>
      </div>
      <div class="page-wrapper">
        <div class="content">
          <h1 id='catalog'>Catalog</h1>
<p>The <code>Catalog</code> is at the heart of the Kill Bill subscription and billing systems. It provides complete current information on products available, subscription plans, billing options, and much more. Each tenant has a single catalog, but different tenants may have completely different catalogs.</p>

<p>The catalog for a given tenant may be updated to new versions from time to time. This provides the ability to deprecate old products, add new ones, or change prices for existing products. Older versions remain available in case they are needed. If a new version is uploaded, new subscriptions will use the new version, but existing subscriptions may either depend on their original versions (grandfathering use case) or use the latest version (price update use case). Please refer to the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog">catalog section of our subscription billing documentation</a> for additional details.</p>

<p>KAUI, our admin UI, provides the ability to upload a <em>simple plan</em>. The <em>simple plan</em> provides a way to ease testing and to play with the system. See <a href="catalog.html#catalog-simple-plan">API section Simple Plan</a>.</p>

<p>A tenant has several options for setting up their catalog. You can choose the option that best meets your needs:</p>

<ol>
<li>Use the default test catalog that ships with Kill Bill by <a href="tenant.html#tenant-create-a-tenant">creating a tenant</a> with <code>useGlobalDefault=true</code></li>
<li>Use the Simple Plan API from KAUI to get started quickly (no need to create an XML catalog, simply use the UI and add the plans you need).</li>
<li>Write your own complete catalog as an XML file and upload it. Some examples of catalog can be found in our <a href="https://github.com/killbill/killbill-docs/tree/v3/catalogs">test repo</a>. For validation, check our <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog-overview">manual</a> or use our <a href="https://cloud.killbill.io/">cloud validation tool</a> after creating an account.</li>
<li>Write a custom Catalog plugin. This is only for advanced users with special needs.</li>
</ol>

<p>For a full discussion of the KillBill catalog, see the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog">Catalog</a> section in the <a href="https://docs.killbill.io/latest/userguide_subscription.html">Subscription Guide</a>.</p>

<p>The <code>Catalog</code> API offers basic CRUD operations, allowing you to upload, retrieve and delete catalog versions. </p>
<h2 id='catalog-resource'>Catalog Resource</h2>
<p>At a very high level, the Catalog consists of the following main components:</p>

<ul>
<li><strong><code>Products</code></strong> : List of products available - e.g <em>Gold</em> product.</li>
<li><strong><code>Plans</code></strong> : List of subscription plans available for each product - e.g <em>gold-monthly</em>, monthly subscription for the <em>Gold</em> product.</li>
<li><strong><code>Rules</code></strong> : Business rules for subscriptions - e.g. when certain changes should take effect.</li>
<li><strong><code>Price Lists</code></strong> : Lists of applicable Plans.</li>
</ul>

<p>Full details about the elements of a Catalog are given in the links cited above. The Catalog is maintained as an XML file.</p>
<h2 id='catalogvalidation-resource'>CatalogValidation Resource</h2>
<p>Represents the result of validating a catalog.</p>

<p>It includes the following attribute:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>catalogValidationErrors</strong></td>
<td>list</td>
<td>system</td>
<td>List of <strong>CatalogValidationError</strong> (see next)</td>
</tr>
</tbody></table>

<p><strong>CatalogValidationError</strong>:</p>

<p>Represents a catalog validation error. </p>

<p>It includes the following attributes:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>errorDescription</strong></td>
<td>string</td>
<td>system</td>
<td>Description about the error</td>
</tr>
</tbody></table>
<h2 id='catalog-2'>Catalog</h2><h3 id='upload-a-catalog-as-xml'>Upload a catalog as XML</h3>
<p>This endpoint uploads a complete catalog in XML format. This becomes the current version of the Catalog for this Tenant.</p>

<p>Note that the naming for the various entities is based on what the <a href="https://www.w3.org/TR/1999/REC-xml-names-19990114/#NT-NCName">XML spec specifies</a>, and in particular the <code>name</code> elements need to be globally unique in the catalog and must conform to the XML <code>NCName</code> definition. This means that they cannot contain symbol characters like :, @, $, %, &amp;, /, +, ,, ;,, whitespace characters or parentheses, and they cannot begin with a number, dot or minus character.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/catalog/xml</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<p><strong>Request Body</strong></p>

<p>Contains the complete catalog in XML format</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='retrieve-the-catalog-as-xml'>Retrieve the catalog as XML</h3>
<p>This endpoint retrieves the Catalog for a specified date in XML format. If there are multiple versions, the latest version with an effective date not later than the requested date is returned. If the effective date for all versions is greater than the requested date, the earliest version is returned.</p>

<p>For example, suppose there are two versions of the catalog, the current version dated 2020-01-01 (Jan. 1, 2020) and a previous version dated 2019-01-01. Then</p>

<ul>
<li>A request with no effective date would retrieve the current version</li>
<li>A request with an effective date of 2020-01-01 or later would retrieve the current version</li>
<li>A request with an effective date of 2019-01-01 or later, but before 2020-01-01, would retrieve the previous version</li>
<li>A request with an effective date earlier than 2019-01-01 would retrieve the previous version, as it is the earliest version available.</li>
</ul>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/xml</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the catalog for the requested date in XML format.</p>
<h3 id='retrieve-the-catalog-as-json'>Retrieve the catalog as JSON</h3>
<p>This endpoint retrieves the Catalog for a requested date in JSON format. If there are multiple versions, the latest version with an effective date not later than the requested date is returned. If the effective date for all versions is greater than the requested date, the earliest version is returned. See the previous endpoint for examples.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>if successful, returns a status code of 200 and the full catalog for the requested date in JSON format.</p>
<h3 id='retrieve-a-list-of-catalog-versions'>Retrieve a list of catalog versions</h3>
<p>Return a list of the effective dates for all available catalogs versions for this tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/versions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a comma-separated list of ISO date strings giving the effective date for each available catalog version.</p>
<h3 id='retrieve-available-base-plans'>Retrieve available base plans</h3>
<p>Returns a list of available base products and associated plans. Each object returned specifies a <code>product</code>, a <code>priceList</code>, a <code>plan</code>selected from the <code>pricelist</code>, and pricing information for the final phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/availableBasePlans</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of objects representing the available base products and plans.</p>
<h3 id='retrieve-available-add-ons-for-a-given-product'>Retrieve available add-ons for a given product</h3>
<p>Returns a list of available add-on products, if any, for a specified base product, and for a specified price list or all price lists. Each object returned specifies a <code>product</code>, a <code>priceList</code>, a <code>plan</code> selected from the <code>pricelist</code>, and pricing information for the final phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/availableAddons</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>baseProductName</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>base product name</td>
</tr>
<tr>
<td><strong>priceListName</strong></td>
<td>string</td>
<td>false</td>
<td>all price lists</td>
<td>price list name</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of objects representing available add-on products.</p>
<h3 id='delete-all-versions-of-a-per-tenant-catalog'>Delete all versions of a per tenant catalog</h3>
<p>Delete all per-tenant catalog versions. The tenant reverts to the system default catalog.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/catalog</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a a status code of 204 and an empty body.</p>
<h3 id='validate-a-catalog-xml'>Validate a catalog XML</h3>
<p>This endpoint validates an XML catalog. </p>

<p>Following are some of the errors that can be detected via this endpoint:</p>

<ul>
<li>Catalog name does not match the name of the existing catalog</li>
<li>A catalog with the particular effectiveDate already exists</li>
<li>An EVERGREEN phase does not have duration as UNLIMITED</li>
</ul>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/catalog/xml/validate</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Request Body</strong></p>

<p>The complete catalog in XML format. Alternative, the path to the catalog XML file can also be specified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a <code>CatalogValidation</code> object. If validation is successful and there are no validation errors, the <code>CatalogValidation</code> object is empty, otherwise it contains a <code>CatalogValidationError</code> List.</p>
<h2 id='subscription-info'>Subscription info</h2>
<p>These endpoints return information concerning a particular subscription. They select from the catalog only the items (such as plan, phase, or products) that currently apply to the specified subscription.</p>
<h3 id='retrieve-the-phase-for-a-given-subscription-and-date'>Retrieve the phase for a given subscription and date</h3>
<p>This API returns information about the current <code>Phase</code> associated with a given subscription. The record returned includes the phase type and information about pricing, duration, and usage.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/phase</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the current phase.</p>
<h3 id='retrieve-the-plan-for-a-given-subscription-and-date'>Retrieve the plan for a given subscription and date</h3>
<p>This API returns information about the current <code>Plan</code> associated with a given subscription. The record returned includes the plan name and information for each phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/plan</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the plan for this subscription.</p>
<h3 id='retrieve-the-pricelist-for-a-given-subscription-and-date'>Retrieve the priceList for a given subscription and date</h3>
<p>This API returns information about the current <code>priceList</code> associated with a given subscription. The record returned includes the price list name and the list of plans on this list.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/priceList</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the price list for this subscription.</p>
<h3 id='retrieve-product-for-a-given-subscription-and-date'>Retrieve product for a given subscription and date</h3>
<p>This API returns information about the <code>product</code> associated with a given subscription. The record returned includes the product names, available plans, items included, and available add-ons.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/product</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<blockquote>
<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the product for this subscription.</p>
<h2 id='simple-plan'>Simple Plan</h2>
<p>We provide a more basic level of APIs as a quick way to add a <code>Plan</code> into an <strong>existing version</strong> of the catalog.
The intent is mostly to help getting started with Kill Bill by abstracting away more complex topics such as alignements, rules, ...
The functionality is exposed on our admin UI (KAUI) to provide a simple graphical way to configure a simple catalog and get started quickly.</p>

<p>One can directly use our Simple Plan API to add new <code>Plans</code> without the need to create an initial catalog version: If there is no
existing catalog version for the tenant, the system will create such an initial version when the first plan is added; otherwise, the
system will use the existing active catalog version to add the new plan (but it will not create a new catalog version).</p>

<p>Note that because the Simple Plan API is just an abstraction on top of the more complex XML based APIs, one can start with such Simple Plan API,
and then download the resulting XML, and edit such catalog by hand (to add entries, modify default rules, ...).</p>

<p>A simple plan has the following limitations:</p>

<ul>
<li>In-advance billing only</li>
<li>Limited to one <code>RECURRING</code> phase  and an optional $0 <code>TRIAL</code> phase</li>
<li>No suport for fixed price</li>
</ul>

<p>Once a simple plan has been uploaded, one can retrieve the associated XML, edit it to configure additional aspects, and then upload
a new version of this catalog. So, this functionality can also be a stepping stone to a full catalog configuration.</p>
<h3 id='add-a-simple-plan'>Add a simple plan</h3>
<p>Add a (simple) Plan into the current version of the Catalog associated with the tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/catalog/simplePlan</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<p><strong>Request Body</strong></p>

<p>Provides the content for the plan in JSON form. This should be very simple. Note that the &quot;planId&quot; becomes the <code>planName</code> attribute. For example:</p>

<p><code>{
  &quot;planId&quot;: &quot;newplan&quot;,
  &quot;productName&quot;: &quot;myitem&quot;,
  &quot;productCategory&quot;: &quot;BASE&quot;,
  &quot;currency&quot;: &quot;USD&quot;,
  &quot;amount&quot;: 0,
  &quot;billingPeriod&quot;: &quot;DAILY&quot;,
  &quot;trialLength&quot;: 0,
  &quot;trialTimeUnit&quot;: &quot;DAYS&quot;,
  &quot;availableBaseProducts&quot;: []
}</code></p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>

        </div>
        <div class="dark-box">
          <div id="docsearch"></div>
        </div>
      </div>
    </body>
    <script>
      setTimeout(function(){
        $('.content h2, .content h3, .content h4').append('<a href=""><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>');
        $('.content h2, .content h3, .content h4').each(function(){
          let itemHref = '#' + $(this).attr('id');
          $(this).find('a').attr("href", itemHref);
        });
      })

      function restructureDOM() {
        const toElem = (elems) => {
          const elem = document.createElement('div');
          elems.forEach((elm, i) => {
            const childElem = document.createElement('div');
            childElem.classList.add(`section-container`)

            const codeBlocks = document.createElement('div');
            codeBlocks.classList.add('code-block');
            const sectionContent = document.createElement('div');
            sectionContent.classList.add('section-content')

            elm.forEach((el) => {
              if(el.tagName.toLowerCase() === "blockquote" || el.className === "highlight") {
                codeBlocks.append(el);
              } else {
                sectionContent.append(el);
              }

              childElem.append(sectionContent);
              childElem.append(codeBlocks);
            });

            elem.appendChild(childElem);
          });
          return elem;
        }

        const content = $('.content').children();

        let oneSection = [];
        let allSections = [];
        let h2Occurence = 0;

        content.each((index, element) => {
          if(h2Occurence !== 0 && (element.tagName === "H2" || element.id === "tenant")) {
            allSections.push(oneSection);
            oneSection = [];
          }
          oneSection.push(element);
          if(element.tagName === "H2") h2Occurence++;
        });

        const convertedNodes = toElem(allSections);
        $('.content').append(convertedNodes);
      }

      setTimeout(() => {
        restructureDOM()
      }, 1000);
    </script>
    <script src='https://cdn.jsdelivr.net/npm/@docsearch/js@3'></script>
    <script>
      docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill_slate'});
    </script>
  </html>
